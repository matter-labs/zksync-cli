import chalk from "chalk";

import Logger from "./logger.js";

const API_URL = "https://zenquotes.io/api/random/";
const ASCII_ART =
  "\n\n\
 -██--                                                        --▓▓-  \n\
 -█▓---▓▓██▓                                               -▓██▓▓--█▓ \n\
 ▓█--▓▓▓---▓██-                                         ▓██▓---▓▓--██ \n\
 ██-██-▓█▓▓---▓█▓-                                   -▓█▓---▓▓█▓██-▓█-\n\
 █▓▓█-   -██▓---▓██-         ▓▓▓▓▓▓▓▓▓▓▓▓          -██▓---▓██-   █▓-█▓\n\
-█▓██      -██----▓██████▓▓▓▓▓---------▓▓▓▓▓▓██▓▓▓██▓---▓██-     ▓█-██\n\
-█▓█▓        ▓█▓---------------------------------▓-----██-       -█-▓█\n\
-█▓█▓      -▓█▓---------------------------------------▓██-       -█▓▓█\n\
 █▓█▓    ▓██▓--------------------------------------------▓█▓     -█▓██\n\
 █▓██  ▓█▓-------------------------------------------------▓█▓   ▓█-██\n\
 ██▓█-██-----------------------------------------------------▓█- ██-█▓\n\
 -█▓██▓-------------------------------------------------------▓███▓▓█ \n\
  ███▓----------------------------------------------------------██▓█▓ \n\
  ██▓---------▓▓▓▓▓████▓▓▓▓----------------▓▓▓▓▓▓▓▓▓▓▓▓----------███  \n\
  █▓-------▓██▓▓▓▓▓██▓▓▓▓▓██▓▓----------▓██▓▓▓▓▓▓▓▓▓▓▓██▓▓--------█▓  \n\
 ██------▓██▓▓███████▓--▓██▓▓██-------▓██▓▓███████▓-▓██▓▓██▓------▓█  \n\
-█▓-----▓█▓▓███▓▓▓▓▓▓    -███▓▓█▓▓▓▓▓██▓▓███▓▓▓▓▓▓    ███▓▓█▓------█▓ \n\
▓█-----▓█▓▓██▓▓▓▓▓▓▓-    ▓▓ ▓█▓▓██▓▓██▓███▓▓▓▓▓▓▓    ▓▓--█▓▓█▓-----▓█ \n\
██-----██▓██▓▓▓▓▓▓▓▓    ▓▓  ▓█▓▓██▓██▓▓██▓▓▓▓▓▓▓    -▓- -██▓██-----▓█-\n\
██-----██▓██▓▓▓▓▓▓▓    ▓▓- -▓█▓▓█▓-▓█▓▓██▓▓▓▓▓▓-    ▓▓  ▓██▓██------█-\n\
██-----▓█▓▓██▓▓▓▓▓    -▓-  ▓██▓▓█▓--█▓▓██▓▓▓▓▓▓    ▓▓  ▓██▓▓██-----▓█-\n\
██------▓█▓▓███▓▓-    ▓▓  ▓██▓▓█▓---▓█▓▓███▓▓▓    ▓▓  -███▓██▓-----▓█-\n\
▓█-------▓██▓████    ▓█--▓█▓▓██▓-----▓██▓▓███-   -▓▓ -██▓▓██-------██ \n\
 █▓--------▓██▓▓▓███████▓▓▓█▓-         -██▓▓▓██▓▓████▓▓▓██▓--------█▓ \n\
 ▓█   -------▓▓▓████████▓▓-    -█▓▓▓▓-   -▓███▓▓▓████▓▓---------  ▓█  \n\
  ▓█                      ▓▓   --███--    █                      ▓█-  \n\
   ▓█-                     ▓▓▓▓▓▓▓▓▓▓▓▓▓▓▓-                     ▓█    \n\
    -█▓                                                       -█▓     \n\
      -█▓                                                   -█▓       \n\
        -▓█-                                              ▓█▓         \n\
           -▓█▓-                                      -▓█▓-           \n\
               -▓██▓--                          --▓██▓-               \n\
                    --▓▓█▓▓▓▓▓▓--------▓▓▓▓▓▓█▓▓--                    \n\
";

const fetchAndFormatQuote = async (): Promise<string> => {
  try {
    const response = await fetch(API_URL);
    if (!response.ok) {
      throw new Error(`Network response was not ok: ${response.statusText}`);
    }

    const data: {
      q: string;
      a: string;
      h: string;
    }[] = await response.json();
    return `${data[0].q} - ${data[0].a}`;
  } catch {
    return "No inspirational quote for you now.";
  }
};

export default async () => {
  const quote = await fetchAndFormatQuote();

  Logger.info(chalk.white(ASCII_ART));
  Logger.info(`\nzeek would like to tell you: "${quote}"\n\n`);
};
